<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_1l1hlxs" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.2.0" modeler:executionPlatform="Camunda Platform" modeler:executionPlatformVersion="7.17.0">
  <bpmn:process id="PizzaOrderingSystem" name="Pizza Ordering system" isExecutable="true" camunda:versionTag="1.0">
    <bpmn:startEvent id="received-order" name="Received a order">
      <bpmn:outgoing>Flow_0xln4hv</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1usqn5a" messageRef="Message_1m51tbu" />
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="Flow_0st7e5c" sourceRef="Gateway_0knz79p" targetRef="pizza-validation">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${order.pizzaList.size() &gt; 0}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_19yh0vy" sourceRef="Gateway_0knz79p" targetRef="side-validation">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${order.sideList.size() &gt; 0}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0ijnqt2" sourceRef="Gateway_0knz79p" targetRef="Activity_0golmdj">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${order.drinksList.size() &gt; 0}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:serviceTask id="Activity_0golmdj" name="Pick a drink" camunda:delegateExpression="${FillDrinks}">
      <bpmn:incoming>Flow_0ijnqt2</bpmn:incoming>
      <bpmn:outgoing>Flow_0i1j74o</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_145bxj3" sourceRef="pizza-validation" targetRef="Gateway_1h4u5bc" />
    <bpmn:intermediateThrowEvent id="send-to-prep" name="Send the order to a pizza maker">
      <bpmn:incoming>Flow_0y2hmlv</bpmn:incoming>
      <bpmn:outgoing>Flow_1seu5bw</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1gxa7z3" messageRef="Message_2gdbm7j" camunda:delegateExpression="${PizzaPrepareOrder}" />
    </bpmn:intermediateThrowEvent>
    <bpmn:sequenceFlow id="Flow_1seu5bw" sourceRef="send-to-prep" targetRef="Event_1auc1sl" />
    <bpmn:intermediateCatchEvent id="Event_1auc1sl" name="Received order from the pizza maker">
      <bpmn:extensionElements />
      <bpmn:incoming>Flow_1seu5bw</bpmn:incoming>
      <bpmn:outgoing>Flow_0nmv0gx</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_19t0fk7" messageRef="Message_1gdq6gi" />
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_0nmv0gx" sourceRef="Event_1auc1sl" targetRef="Gateway_1t3xbl2" />
    <bpmn:sequenceFlow id="Flow_15pxz2a" sourceRef="Gateway_1t3xbl2" targetRef="calculateTotal" />
    <bpmn:endEvent id="Event_0jz5teu">
      <bpmn:incoming>Flow_03dxqo8</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_06lyiew" sourceRef="calculateTotal" targetRef="receiptPayment" />
    <bpmn:sequenceFlow id="Flow_0sdm6st" sourceRef="side-validation" targetRef="Gateway_1p895yf" />
    <bpmn:intermediateThrowEvent id="Event_16bw06d" name="Send the order to a bread maker">
      <bpmn:incoming>Flow_0i9y55q</bpmn:incoming>
      <bpmn:outgoing>Flow_1105f36</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1q0hmrg" messageRef="Message_0ga8f6c" camunda:delegateExpression="${SidePrepareOrder}" />
    </bpmn:intermediateThrowEvent>
    <bpmn:sequenceFlow id="Flow_1105f36" sourceRef="Event_16bw06d" targetRef="Event_062tf35" />
    <bpmn:intermediateCatchEvent id="Event_062tf35" name="Received order from the side maker">
      <bpmn:extensionElements />
      <bpmn:incoming>Flow_1105f36</bpmn:incoming>
      <bpmn:outgoing>Flow_1298z3c</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_00005pg" messageRef="Message_31h2epg" />
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_1298z3c" sourceRef="Event_062tf35" targetRef="Gateway_1t3xbl2" />
    <bpmn:sequenceFlow id="Flow_0i1j74o" sourceRef="Activity_0golmdj" targetRef="Gateway_1t3xbl2" />
    <bpmn:sequenceFlow id="Flow_03dxqo8" sourceRef="receiptPayment" targetRef="Event_0jz5teu" />
    <bpmn:userTask id="receiptPayment" name="Print receipt and make Payment">
      <bpmn:incoming>Flow_06lyiew</bpmn:incoming>
      <bpmn:outgoing>Flow_03dxqo8</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:inclusiveGateway id="Gateway_0knz79p">
      <bpmn:incoming>Flow_0xln4hv</bpmn:incoming>
      <bpmn:outgoing>Flow_0st7e5c</bpmn:outgoing>
      <bpmn:outgoing>Flow_19yh0vy</bpmn:outgoing>
      <bpmn:outgoing>Flow_0ijnqt2</bpmn:outgoing>
    </bpmn:inclusiveGateway>
    <bpmn:inclusiveGateway id="Gateway_1t3xbl2">
      <bpmn:incoming>Flow_0nmv0gx</bpmn:incoming>
      <bpmn:incoming>Flow_1298z3c</bpmn:incoming>
      <bpmn:incoming>Flow_0i1j74o</bpmn:incoming>
      <bpmn:outgoing>Flow_15pxz2a</bpmn:outgoing>
    </bpmn:inclusiveGateway>
    <bpmn:businessRuleTask id="calculateTotal" name="calculate Total Charge" camunda:resultVariable="pizzaPrice" camunda:decisionRef="priceCalculator" camunda:mapDecisionResult="singleEntry">
      <bpmn:incoming>Flow_15pxz2a</bpmn:incoming>
      <bpmn:outgoing>Flow_06lyiew</bpmn:outgoing>
    </bpmn:businessRuleTask>
    <bpmn:sequenceFlow id="Flow_0xln4hv" sourceRef="received-order" targetRef="Gateway_0knz79p" />
    <bpmn:serviceTask id="pizza-validation" name="Pizza Validation" camunda:delegateExpression="${ValidatePizzaDelegate}">
      <bpmn:incoming>Flow_0st7e5c</bpmn:incoming>
      <bpmn:outgoing>Flow_145bxj3</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_1h4u5bc">
      <bpmn:incoming>Flow_145bxj3</bpmn:incoming>
      <bpmn:outgoing>Flow_0y2hmlv</bpmn:outgoing>
      <bpmn:outgoing>Flow_0n65rj3</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0y2hmlv" sourceRef="Gateway_1h4u5bc" targetRef="send-to-prep">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isValidPizzaOrder == "true"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="Event_19vywwc">
      <bpmn:incoming>Flow_0n65rj3</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0n65rj3" sourceRef="Gateway_1h4u5bc" targetRef="Event_19vywwc">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isValidPizzaOrder == "false"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:serviceTask id="side-validation" name="side validation" camunda:delegateExpression="${ValidateSideDelegate}">
      <bpmn:incoming>Flow_19yh0vy</bpmn:incoming>
      <bpmn:outgoing>Flow_0sdm6st</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_1p895yf">
      <bpmn:incoming>Flow_0sdm6st</bpmn:incoming>
      <bpmn:outgoing>Flow_0i9y55q</bpmn:outgoing>
      <bpmn:outgoing>Flow_1u3lyat</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0i9y55q" sourceRef="Gateway_1p895yf" targetRef="Event_16bw06d">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isValidSideOrder == "true"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="Event_03635n4">
      <bpmn:incoming>Flow_1u3lyat</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1u3lyat" sourceRef="Gateway_1p895yf" targetRef="Event_03635n4">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isValidSideOrder == "false"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:textAnnotation id="TextAnnotation_0isqirg">
      <bpmn:text>Create an API which can publish a message PickÂ 
1) Combo menu
2) Sides
3) Drinks</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_1qlzuzs" sourceRef="received-order" targetRef="TextAnnotation_0isqirg" />
    <bpmn:textAnnotation id="TextAnnotation_0shlnlg">
      <bpmn:text>Make sure the user has all the types and toppings of the pizza availablebefore the process</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_04g2iuk" sourceRef="pizza-validation" targetRef="TextAnnotation_0shlnlg" />
  </bpmn:process>
  <bpmn:message id="Message_1m51tbu" name="orderMessage" />
  <bpmn:message id="Message_0ga8f6c" name="sideCreationMessage" />
  <bpmn:message id="Message_31h2epg" name="SideStatusMessage" />
  <bpmn:message id="Message_2gdbm7j" name="PizzaCreationMessage" />
  <bpmn:message id="Message_1gdq6gi" name="PizzaStatusMessage" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="PizzaOrderingSystem">
      <bpmndi:BPMNEdge id="Flow_1u3lyat_di" bpmnElement="Flow_1u3lyat">
        <di:waypoint x="685" y="415" />
        <di:waypoint x="685" y="490" />
        <di:waypoint x="872" y="490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0i9y55q_di" bpmnElement="Flow_0i9y55q">
        <di:waypoint x="710" y="390" />
        <di:waypoint x="782" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0n65rj3_di" bpmnElement="Flow_0n65rj3">
        <di:waypoint x="685" y="210" />
        <di:waypoint x="685" y="140" />
        <di:waypoint x="872" y="140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0y2hmlv_di" bpmnElement="Flow_0y2hmlv">
        <di:waypoint x="710" y="235" />
        <di:waypoint x="782" y="235" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0xln4hv_di" bpmnElement="Flow_0xln4hv">
        <di:waypoint x="218" y="390" />
        <di:waypoint x="385" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_03dxqo8_di" bpmnElement="Flow_03dxqo8">
        <di:waypoint x="1350" y="390" />
        <di:waypoint x="1402" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0i1j74o_di" bpmnElement="Flow_0i1j74o">
        <di:waypoint x="610" y="550" />
        <di:waypoint x="1010" y="550" />
        <di:waypoint x="1010" y="415" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1298z3c_di" bpmnElement="Flow_1298z3c">
        <di:waypoint x="938" y="390" />
        <di:waypoint x="985" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1105f36_di" bpmnElement="Flow_1105f36">
        <di:waypoint x="818" y="390" />
        <di:waypoint x="902" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0sdm6st_di" bpmnElement="Flow_0sdm6st">
        <di:waypoint x="610" y="390" />
        <di:waypoint x="660" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_06lyiew_di" bpmnElement="Flow_06lyiew">
        <di:waypoint x="1190" y="390" />
        <di:waypoint x="1250" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_15pxz2a_di" bpmnElement="Flow_15pxz2a">
        <di:waypoint x="1035" y="390" />
        <di:waypoint x="1090" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0nmv0gx_di" bpmnElement="Flow_0nmv0gx">
        <di:waypoint x="928" y="235" />
        <di:waypoint x="1010" y="235" />
        <di:waypoint x="1010" y="365" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1seu5bw_di" bpmnElement="Flow_1seu5bw">
        <di:waypoint x="818" y="235" />
        <di:waypoint x="892" y="235" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_145bxj3_di" bpmnElement="Flow_145bxj3">
        <di:waypoint x="610" y="235" />
        <di:waypoint x="660" y="235" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ijnqt2_di" bpmnElement="Flow_0ijnqt2">
        <di:waypoint x="410" y="415" />
        <di:waypoint x="410" y="550" />
        <di:waypoint x="510" y="550" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_19yh0vy_di" bpmnElement="Flow_19yh0vy">
        <di:waypoint x="435" y="390" />
        <di:waypoint x="510" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0st7e5c_di" bpmnElement="Flow_0st7e5c">
        <di:waypoint x="410" y="365" />
        <di:waypoint x="410" y="235" />
        <di:waypoint x="510" y="235" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_06gjiw0_di" bpmnElement="received-order">
        <dc:Bounds x="182" y="372" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="158" y="415" width="85" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_18ej479_di" bpmnElement="Activity_0golmdj">
        <dc:Bounds x="510" y="510" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_12i1l7n_di" bpmnElement="send-to-prep">
        <dc:Bounds x="782" y="217" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="757" y="260" width="86" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1kpfinw_di" bpmnElement="Event_1auc1sl">
        <dc:Bounds x="892" y="217" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="872" y="260" width="76" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0jz5teu_di" bpmnElement="Event_0jz5teu">
        <dc:Bounds x="1402" y="372" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0c2ayr2_di" bpmnElement="Event_16bw06d">
        <dc:Bounds x="782" y="372" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="757" y="415" width="86" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1sjd6az_di" bpmnElement="Event_062tf35">
        <dc:Bounds x="902" y="372" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="882" y="415" width="76" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0nqzabh_di" bpmnElement="receiptPayment">
        <dc:Bounds x="1250" y="350" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_11ln59r_di" bpmnElement="Gateway_0knz79p">
        <dc:Bounds x="385" y="365" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0uflz4d_di" bpmnElement="Gateway_1t3xbl2">
        <dc:Bounds x="985" y="365" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_13p18ww_di" bpmnElement="calculateTotal">
        <dc:Bounds x="1090" y="350" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1oxg81b_di" bpmnElement="pizza-validation">
        <dc:Bounds x="510" y="195" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1h4u5bc_di" bpmnElement="Gateway_1h4u5bc" isMarkerVisible="true">
        <dc:Bounds x="660" y="210" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_19vywwc_di" bpmnElement="Event_19vywwc">
        <dc:Bounds x="872" y="122" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0zxkfnx_di" bpmnElement="side-validation">
        <dc:Bounds x="510" y="350" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1p895yf_di" bpmnElement="Gateway_1p895yf" isMarkerVisible="true">
        <dc:Bounds x="660" y="365" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_03635n4_di" bpmnElement="Event_03635n4">
        <dc:Bounds x="872" y="472" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_0isqirg_di" bpmnElement="TextAnnotation_0isqirg">
        <dc:Bounds x="170" y="210" width="170" height="100" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_0shlnlg_di" bpmnElement="TextAnnotation_0shlnlg">
        <dc:Bounds x="530" y="80" width="210" height="50" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Association_1qlzuzs_di" bpmnElement="Association_1qlzuzs">
        <di:waypoint x="201" y="372" />
        <di:waypoint x="206" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_04g2iuk_di" bpmnElement="Association_04g2iuk">
        <di:waypoint x="565" y="195" />
        <di:waypoint x="573" y="130" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
